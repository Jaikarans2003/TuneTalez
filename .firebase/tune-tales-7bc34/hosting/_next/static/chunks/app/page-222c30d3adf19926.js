(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{38:(e,r,t)=>{Promise.resolve().then(t.bind(t,2626))},1990:(e,r,t)=>{"use strict";t.d(r,{HA:()=>p,KC:()=>n,KJ:()=>l,QC:()=>g,VM:()=>d,Vz:()=>c,be:()=>m,cP:()=>i,iC:()=>x,v_:()=>h,zy:()=>u});var a=t(5300),s=t(9708),o=t(9996);let l=async(e,r)=>{try{let t=(0,o.KR)(a.IG,"pdfs/".concat(e.name)),l=(0,o.bp)(t,e);return new Promise((t,n)=>{l.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Upload failed:",e),n(e)},async()=>{let r=await (0,o.qk)(l.snapshot.ref),n={name:e.name,url:r,createdAt:Date.now()},i=await (0,s.gS)((0,s.rJ)(a.db,"pdfs"),n);t({...n,id:i.id})})})}catch(e){throw console.error("Error uploading PDF:",e),e}},n=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"pdfs"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting PDFs:",e),e}},i=async e=>{try{if(!e.id)throw Error("Document ID is required");await (0,s.kd)((0,s.H9)(a.db,"pdfs",e.id));let r=(0,o.KR)(a.IG,"pdfs/".concat(e.name));await (0,o.XR)(r)}catch(e){throw console.error("Error deleting PDF:",e),e}},c=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reader";try{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",role:r,createdAt:Date.now()};return await (0,s.BN)((0,s.H9)(a.db,"users",e.uid),t,{merge:!0}),t}catch(e){throw console.error("Error creating user profile:",e),e}},d=async e=>{try{let r=await (0,s.x7)((0,s.H9)(a.db,"users",e));if(r.exists())return r.data();return null}catch(e){throw console.error("Error getting user profile:",e),e}},h=async(e,r)=>{try{await (0,s.BN)((0,s.H9)(a.db,"users",e),{role:r},{merge:!0})}catch(e){throw console.error("Error updating user role:",e),e}},m=async(e,r)=>{try{let t="".concat(Date.now(),"_").concat(e.name),s=(0,o.KR)(a.IG,"books/thumbnails/".concat(t)),l=(0,o.bp)(s,e);return new Promise((e,t)=>{l.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Upload failed:",e),t(e)},async()=>{let r=await (0,o.qk)(l.snapshot.ref);e(r)})})}catch(e){throw console.error("Error uploading thumbnail:",e),e}},x=async e=>{try{let r={...e,createdAt:Date.now()},t=await (0,s.gS)((0,s.rJ)(a.db,"books"),r);return{...r,id:t.id}}catch(e){throw console.error("Error creating book:",e),e}},u=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"books"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting books:",e),e}},g=async e=>{try{let r=(0,s.H9)(a.db,"books",e),t=await (0,s.x7)(r);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error getting book:",e),e}},p=async e=>{try{if(!e.id)throw Error("Document ID is required");if(await (0,s.kd)((0,s.H9)(a.db,"books",e.id)),e.thumbnailUrl)try{let r=e.thumbnailUrl.split("books/thumbnails/").pop();if(r){let e=(0,o.KR)(a.IG,"books/thumbnails/".concat(r));await (0,o.XR)(e)}}catch(e){console.error("Error deleting thumbnail:",e)}}catch(e){throw console.error("Error deleting book:",e),e}}},2626:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var a=t(5155),s=t(2115),o=t(1990),l=t(2619),n=t.n(l);let i=e=>{let{pdf:r,onDelete:t}=e;return(0,a.jsxs)("div",{className:"bg-[#1F1F1F] rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-red-500/30 hover:shadow-xl group",children:[(0,a.jsxs)("div",{className:"relative aspect-[2/3] w-full",children:[(0,a.jsx)("div",{className:"h-full w-full bg-[#2D2D2D] flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-primary text-6xl",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})})})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-end p-4",children:(0,a.jsx)(n(),{href:"/view/".concat(r.id),className:"w-full text-center text-white font-bold py-3 px-4 rounded-lg bg-primary hover:bg-red-700 transition-colors duration-300 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 shadow-lg",children:"View Now"})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white truncate group-hover:text-primary transition-colors duration-300",title:r.name,children:r.name}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:r.description||"No description available"})]}),(0,a.jsx)("button",{onClick:()=>t(r),className:"text-gray-400 hover:text-red-500 text-sm ml-2","aria-label":"Delete PDF",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})};var c=t(5239);let d=e=>{var r;let{book:t,onDelete:s}=e;return(0,a.jsxs)("div",{className:"bg-[#1F1F1F] rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-red-500/30 hover:shadow-xl group",children:[(0,a.jsxs)("div",{className:"relative aspect-[2/3] w-full",children:[(0,a.jsx)(c.default,{src:t.thumbnailUrl||"/placeholder-book.png",alt:t.title,fill:!0,className:"object-cover transition-transform duration-500 group-hover:scale-110"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-end p-4",children:(0,a.jsx)(n(),{href:"/read/".concat(t.id),className:"w-full text-center text-white font-bold py-3 px-4 rounded-lg bg-primary hover:bg-red-700 transition-colors duration-300 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 shadow-lg",children:"Read Now"})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white truncate group-hover:text-primary transition-colors duration-300",children:t.title}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:t.author}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:null==(r=t.tags)?void 0:r.map((e,r)=>(0,a.jsx)("span",{className:"inline-block bg-gray-800 rounded-full px-2 py-1 text-xs font-semibold text-gray-300",children:e},r))})]}),s&&(0,a.jsx)("button",{onClick:()=>{s&&window.confirm('Are you sure you want to delete "'.concat(t.title,'"?'))&&s(t)},className:"text-gray-400 hover:text-red-500 text-sm ml-2","aria-label":"Delete book",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})};function h(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0),[h,m]=(0,s.useState)(null),x=async()=>{try{let e=await (0,o.KC)();return r(e),!0}catch(e){return console.error("Error fetching PDFs:",e),!1}},u=async()=>{try{let e=await (0,o.zy)();return l(e),!0}catch(e){return console.error("Error fetching books:",e),!1}},g=async()=>{c(!0);try{let[e,r]=await Promise.all([x(),u()]);e||r?m(null):m("Failed to load content. Please try again later.")}catch(e){console.error("Error fetching content:",e),m("Failed to load content. Please try again later.")}finally{c(!1)}};(0,s.useEffect)(()=>{g()},[]);let p=async e=>{if(window.confirm("Are you sure you want to delete ".concat(e.name,"?")))try{await (0,o.cP)(e),x()}catch(e){console.error("Error deleting PDF:",e),m("Failed to delete PDF. Please try again.")}},b=async e=>{try{await (0,o.HA)(e),u()}catch(e){console.error("Error deleting book:",e),m("Failed to delete book. Please try again.")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#1F1F1F] to-[#2D2D2D] text-white",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-16 md:py-24",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,a.jsxs)("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:[(0,a.jsx)("span",{className:"text-primary",children:"Tune"}),"Talez"]}),(0,a.jsx)("p",{className:"text-xl md:text-2xl mb-8 text-gray-300",children:"Discover and enjoy a world of stories at your fingertips"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{className:"bg-primary hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg transition-colors duration-300 shadow-lg",children:"Explore Books"})})]})})}),(0,a.jsx)("div",{className:"px-4 py-8 md:ml-0",children:n?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):h?(0,a.jsx)("div",{className:"bg-red-900 border border-red-700 text-white px-4 py-3 rounded relative",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:h})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"mb-12 py-12",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("h2",{className:"text-3xl font-bold text-primary flex items-center",children:[(0,a.jsx)("span",{className:"text-primary mr-2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),"Explore Our Books"]})}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-[#1F1F1F] rounded-lg",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-white mb-2",children:"No books found"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Check back later for new books"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 md:gap-8",children:t.map(e=>(0,a.jsx)(d,{book:e,onDelete:b},e.id))})]}),(0,a.jsxs)("section",{className:"py-12 bg-[#1F1F1F] rounded-lg",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-8 px-4",children:(0,a.jsxs)("h2",{className:"text-3xl font-bold text-primary flex items-center",children:[(0,a.jsx)("span",{className:"text-orange mr-2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),"PDF Collection"]})}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-white mb-2",children:"No PDFs found"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Check back later for new PDFs"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 md:gap-8 px-4",children:e.map(e=>(0,a.jsx)(i,{pdf:e,onDelete:p},e.id))})]})]})})]})}},5300:(e,r,t)=>{"use strict";t.d(r,{IG:()=>c,db:()=>i,j2:()=>d});var a=t(2078),s=t(9708),o=t(9996),l=t(1328);let n=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyB7byiynZrjiqAo8NDIurtBg-MVBolYSjY",authDomain:"tune-tales-7bc34.firebaseapp.com",projectId:"tune-tales-7bc34",storageBucket:"tune-tales-7bc34.firebasestorage.app",messagingSenderId:"73380609988",appId:"1:73380609988:web:deb202818f8a602f73ee91",measurementId:"G-54939GDQH8"}),i=(0,s.aU)(n),c=(0,o.c7)(n),d=(0,l.xI)(n)}},e=>{e.O(0,[135,210,372,619,239,441,493,358],()=>e(e.s=38)),_N_E=e.O()}]);