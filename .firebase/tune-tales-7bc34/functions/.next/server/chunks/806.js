"use strict";exports.id=806,exports.ids=[806],exports.modules={10806:(a,b,c)=>{c.d(b,{A:()=>m});var d=c(21124),e=c(38301),f=c(53440),g=c(72296),h=c(71716),i=c(61248),j=c(22509),k=c(93130);let l=({editor:a})=>a?(0,d.jsxs)("div",{className:"border-b border-gray-600 p-1 flex flex-wrap gap-1 bg-[#333333]",children:[(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleHeading({level:1}).run(),className:`p-1 rounded ${a.isActive("heading",{level:1})?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Heading 1",children:"H1"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleHeading({level:2}).run(),className:`p-1 rounded ${a.isActive("heading",{level:2})?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Heading 2",children:"H2"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().setParagraph().run(),className:`p-1 rounded ${a.isActive("paragraph")?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Paragraph",children:"P"}),(0,d.jsx)("span",{className:"mx-1 text-gray-500",children:"|"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleBold().run(),className:`p-1 rounded ${a.isActive("bold")?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Bold",children:(0,d.jsx)("strong",{children:"B"})}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleItalic().run(),className:`p-1 rounded ${a.isActive("italic")?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Italic",children:(0,d.jsx)("em",{children:"I"})}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleUnderline().run(),className:`p-1 rounded ${a.isActive("underline")?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Underline",children:(0,d.jsx)("u",{children:"U"})}),(0,d.jsx)("span",{className:"mx-1 text-gray-500",children:"|"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().setTextAlign("left").run(),className:`p-1 rounded ${a.isActive({textAlign:"left"})?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Align left",children:"←"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().setTextAlign("center").run(),className:`p-1 rounded ${a.isActive({textAlign:"center"})?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Align center",children:"↔"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().setTextAlign("right").run(),className:`p-1 rounded ${a.isActive({textAlign:"right"})?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Align right",children:"→"}),(0,d.jsx)("span",{className:"mx-1 text-gray-500",children:"|"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleBulletList().run(),className:`p-1 rounded ${a.isActive("bulletList")?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Bullet list",children:"• List"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().toggleOrderedList().run(),className:`p-1 rounded ${a.isActive("orderedList")?"bg-gray-700":"bg-[#444444] hover:bg-gray-600"}`,title:"Numbered list",children:"1. List"}),(0,d.jsx)("span",{className:"mx-1 text-gray-500",children:"|"}),(0,d.jsx)("button",{onClick:()=>a.chain().focus().unsetAllMarks().clearNodes().run(),className:"p-1 rounded bg-[#444444] hover:bg-gray-600",title:"Clear formatting",children:"Clear"})]}):null,m=({onSuccess:a})=>{let[b,c]=(0,e.useState)(""),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)(""),[q,r]=(0,e.useState)(""),[s,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)(""),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(null),[E,F]=(0,e.useState)(null),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)(0),[K,L]=(0,e.useState)(null),M=(0,e.useRef)(null),N=(0,g.hG)({extensions:[h.A,i.A.configure({types:["heading","paragraph"],alignments:["left","center","right"]}),j.A,k.A.configure({placeholder:"Write your book content here..."})],content:o,editorProps:{attributes:{class:"prose prose-invert max-w-none focus:outline-none min-h-[300px] p-4 text-white",dir:"ltr"}},onUpdate:({editor:a})=>{let b=a.getHTML();p(b),b.trim()?r(""):r("Content is required")},immediatelyRender:!1});(0,e.useEffect)(()=>{N&&t(!0)},[N]),(0,e.useEffect)(()=>{N&&N.setEditable(!G)},[G,N]);let O=async d=>{if(d.preventDefault(),b.trim())n("");else{n("Title is required"),L("Please enter a book title");return}if(u.trim())x("");else{x("Author is required"),L("Please enter an author name");return}if(o.trim())r("");else{r("Content is required"),L("Please enter book content");return}if(y.trim())B("");else{B("At least one tag is required"),L("Please add at least one tag");return}if(!C)return void L("Please upload a thumbnail image");try{H(!0),L(null);let d=await (0,f.be)(C,a=>{J(a)}),e=y.split(",").map(a=>a.trim()).filter(a=>a.length>0),g=await (0,f.iC)({title:b.trim(),content:o.trim(),author:u.trim(),tags:e,thumbnailUrl:d});console.log("Book created successfully:",g),c(""),p(""),v(""),z(""),D(null),F(null),J(0),a&&a()}catch(a){console.error("Error creating book:",a),L(`Failed to create book: ${a.message||"Please try again."}`)}finally{H(!1)}};return(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-[#1F1F1F] rounded-lg shadow-md text-white",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Write a New Book"}),K&&(0,d.jsx)("div",{className:"mb-4 p-3 bg-red-900 border border-red-700 text-white rounded",children:K}),(0,d.jsxs)("form",{onSubmit:O,children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-300 mb-1",children:"Book Title *"}),(0,d.jsx)("input",{type:"text",id:"title",value:b,onChange:a=>c(a.target.value),className:"w-full px-3 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-[#2a2a2a] text-white",placeholder:"Enter book title",disabled:G,required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-300 mb-1",children:"Author Name *"}),(0,d.jsx)("input",{type:"text",id:"author",value:u,onChange:a=>v(a.target.value),className:"w-full px-3 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-[#2a2a2a] text-white",placeholder:"Enter author name",disabled:G,required:!0})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-300 mb-1",children:"Tags (comma separated)"}),(0,d.jsx)("input",{type:"text",id:"tags",value:y,onChange:a=>z(a.target.value),className:"w-full px-3 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-[#2a2a2a] text-white",placeholder:"fiction, fantasy, adventure",disabled:G})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Book Thumbnail *"}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("button",{type:"button",onClick:()=>M.current?.click(),className:"px-4 py-2 bg-[#333333] text-white rounded hover:bg-[#444444] transition-colors disabled:bg-[#222222]",disabled:G,children:"Select Image"}),(0,d.jsx)("input",{type:"file",ref:M,onChange:a=>{if(a.target.files&&a.target.files[0]){let b=a.target.files[0];if(!b.type.includes("image/"))return void L("Please select an image file");if(b.size>5242880)return void L("Image size should be less than 5MB");D(b),L(null);let c=new FileReader;c.onload=a=>{F(a.target?.result)},c.readAsDataURL(b)}},className:"hidden",accept:"image/*",disabled:G}),(0,d.jsx)("span",{className:"text-sm text-gray-400",children:C?C.name:"No file selected"})]}),E&&(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsx)("img",{src:E,alt:"Thumbnail preview",className:"h-40 object-cover rounded border border-gray-300"})})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-300 mb-1",children:"Book Content *"}),(0,d.jsx)("div",{className:"border border-gray-600 rounded-md focus-within:ring-2 focus-within:ring-primary overflow-hidden",children:s?(0,d.jsxs)("div",{className:"bg-[#2a2a2a]",children:[(0,d.jsx)(l,{editor:N}),(0,d.jsx)(g.$Z,{editor:N,className:"prose-invert"})]}):(0,d.jsx)("div",{className:"w-full px-3 py-2 bg-[#2a2a2a] text-white min-h-[300px] flex items-center justify-center",children:(0,d.jsx)("p",{children:"Loading editor..."})})}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Use the toolbar to format your content"}),q&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q})]}),G&&(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,d.jsx)("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${I}%`}})}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[Math.round(I),"% uploaded"]})]}),(0,d.jsxs)("button",{type:"submit",disabled:G,className:"w-full bg-primary text-white py-2 px-4 rounded hover:bg-primary-dark transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[G?"Publishing...":"Publish Book",(0,d.jsx)("span",{className:"ml-2",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})]})]})]})}}};