exports.id=608,exports.ids=[608],exports.modules={9733:(a,b,c)=>{Promise.resolve().then(c.bind(c,15564))},15564:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>m});var d=c(21124),e=c(38301),f=c(6415),g=c.n(f);c(44263);var h=c(3991),i=c.n(h),j=c(33337);let k=({isOpen:a,setIsOpen:b})=>{let{user:c,profile:f,logout:g,updateRole:h}=(0,j.As)(),[k,l]=(0,e.useState)(!1),m=(0,e.useRef)(null),n=async()=>{try{await g()}catch(a){console.error("Logout failed:",a)}};return(0,e.useEffect)(()=>{let a=a=>{m.current&&!m.current.contains(a.target)&&l(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),(0,d.jsx)("header",{className:"bg-[#212121] text-white sticky top-0 z-50 shadow-md",children:(0,d.jsxs)("div",{className:"container mx-auto px-4 py-2 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:()=>b(!a),className:"mr-3 text-white md:hidden","aria-label":"Toggle menu",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,d.jsxs)(i(),{href:"/",className:"flex items-center",children:[(0,d.jsx)("span",{className:"text-2xl font-bold text-primary mr-1",children:"Tune"}),(0,d.jsx)("span",{className:"text-2xl font-bold text-white",children:"Talez"})]})]}),(0,d.jsx)("div",{className:"hidden md:flex flex-1 max-w-2xl mx-8",children:(0,d.jsxs)("div",{className:"relative w-full",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search books and PDFs...",className:"w-full bg-[#121212] border border-[#303030] rounded-l-full py-2 px-4 text-white focus:outline-none focus:border-[#404040]"}),(0,d.jsx)("button",{className:"absolute right-0 top-0 h-full bg-[#303030] px-4 rounded-r-full flex items-center justify-center hover:bg-[#404040]",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)(i(),{href:"/write",className:"hidden sm:flex items-center text-white hover:text-primary transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,d.jsx)("span",{children:"Write"})]}),(0,d.jsxs)(i(),{href:"/upload",className:"hidden sm:flex items-center text-white hover:text-primary transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})}),(0,d.jsx)("span",{children:"Upload"})]}),c?(0,d.jsxs)("div",{className:"relative",ref:m,children:[(0,d.jsxs)("button",{onClick:()=>{l(!k)},className:"flex items-center space-x-2 text-white hover:text-primary transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden",children:c.photoURL?(0,d.jsx)("img",{src:c.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(0,d.jsx)("span",{className:"text-sm font-medium",children:c.email?.charAt(0).toUpperCase()})}),(0,d.jsxs)("div",{className:"hidden md:block",children:[(0,d.jsx)("span",{className:"block",children:c.displayName||c.email?.split("@")[0]}),f&&(0,d.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:f.role})]})]}),k&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-[#1F1F1F] rounded-md shadow-lg py-1 z-50",children:[(0,d.jsx)(i(),{href:"/profile",className:"block w-full text-left px-4 py-2 text-sm text-white hover:bg-[#303030] transition-colors",children:"View Profile"}),f&&(0,d.jsxs)("div",{className:"px-4 py-2 border-b border-t border-gray-700",children:[(0,d.jsx)("p",{className:"text-sm text-white",children:"Account Type"}),(0,d.jsxs)("div",{className:"flex mt-1 space-x-2",children:[(0,d.jsx)("button",{onClick:()=>h("reader"),className:`text-xs px-2 py-1 rounded ${"reader"===f.role?"bg-primary text-white":"bg-gray-700 text-gray-300"}`,children:"Reader"}),(0,d.jsx)("button",{onClick:()=>h("author"),className:`text-xs px-2 py-1 rounded ${"author"===f.role?"bg-primary text-white":"bg-gray-700 text-gray-300"}`,children:"Author"})]})]}),(0,d.jsx)("button",{onClick:n,className:"block w-full text-left px-4 py-2 text-sm text-white hover:bg-[#303030] transition-colors",children:"Sign Out"})]})]}):(0,d.jsxs)(i(),{href:"/auth/signin",className:"bg-primary hover:bg-primary-dark text-white py-1 px-4 rounded-full flex items-center",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,d.jsx)("span",{children:"Sign In"})]})]})]})})},l=({isOpen:a})=>(0,d.jsx)("aside",{className:`bg-[#212121] text-white w-64 fixed left-0 top-16 bottom-0 overflow-y-auto transition-transform duration-300 z-40 ${a?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsx)("nav",{className:"py-4 px-4",children:(0,d.jsxs)("ul",{className:"space-y-2",children:[(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/",className:"flex items-center py-2 px-4 rounded-lg hover:bg-[#303030] transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,d.jsx)("span",{children:"Home"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/liked",className:"flex items-center py-2 px-4 rounded-lg hover:bg-[#303030] transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,d.jsx)("span",{children:"Liked"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/saved",className:"flex items-center py-2 px-4 rounded-lg hover:bg-[#303030] transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(0,d.jsx)("span",{children:"Saved"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/orders",className:"flex items-center py-2 px-4 rounded-lg hover:bg-[#303030] transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,d.jsx)("span",{children:"Orders"})]})})]})}),(0,d.jsx)("div",{className:"border-t border-[#303030] my-2"}),(0,d.jsxs)("div",{className:"px-4 py-2",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"Library"}),(0,d.jsxs)("ul",{className:"space-y-2",children:[(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/write",className:"flex items-center py-2 px-4 rounded-lg hover:bg-[#303030] transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,d.jsx)("span",{children:"Write Book"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i(),{href:"/upload",className:"flex items-center py-2 px-4 rounded-lg hover:bg-[#303030] transition-colors",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})}),(0,d.jsx)("span",{children:"Upload Books"})]})})]})]}),(0,d.jsx)("div",{className:"flex-grow"}),(0,d.jsx)("div",{className:"mt-auto border-t border-[#303030] py-4 px-6",children:(0,d.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,d.jsx)("h3",{className:"font-bold text-primary mb-1",children:"TuneTalez"}),(0,d.jsx)("p",{className:"text-xs mb-2",children:"Write books and upload PDF files with ease"}),(0,d.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," TuneTalez"]}),(0,d.jsx)("p",{className:"text-xs",children:"All rights reserved."})]})})]})});function m({children:a}){let[b,c]=(0,e.useState)(!1);return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${g().className} flex flex-col min-h-screen bg-background`,children:(0,d.jsxs)(j.OJ,{children:[(0,d.jsx)(k,{isOpen:b,setIsOpen:c}),(0,d.jsxs)("div",{className:"flex flex-1 pt-16",children:[" ",(0,d.jsx)(l,{isOpen:b}),(0,d.jsx)("main",{className:"flex-grow md:ml-64 px-4 py-6",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto",children:a})})]}),b&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>c(!1)})]})})})}},33337:(a,b,c)=>{"use strict";c.d(b,{As:()=>i,OJ:()=>k,z8:()=>j});var d=c(21124),e=c(38301),f=c(58062),g=c(53440);let h=(0,e.createContext)({user:null,profile:null,loading:!0,logout:async()=>{},updateRole:async()=>{}}),i=()=>(0,e.useContext)(h),j=()=>{let{profile:a,loading:b}=i();return!b&&a?.role==="admin"},k=({children:a})=>{let[b,c]=(0,e.useState)(null),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0);(0,e.useEffect)(()=>{(async()=>{if(b)try{let a=await (0,g.VM)(b.uid);a||(a=await (0,g.Vz)(b)),j(a)}catch(a){console.error("Error fetching user profile:",a)}else j(null)})()},[b]),(0,e.useEffect)(()=>{let a=(0,f.Bh)(a=>{c(a),a||l(!1)});return()=>a()},[]),(0,e.useEffect)(()=>{b&&i&&l(!1)},[b,i]);let m=async()=>{await (0,f.CI)()},n=async a=>{b&&(await (0,g.v_)(b.uid,a),j(b=>b?{...b,role:a}:null))};return(0,d.jsx)(h.Provider,{value:{user:b,profile:i,loading:k,logout:m,updateRole:n},children:a})}},44263:()=>{},47817:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Manartha Varsity Projects\\\\tunetalez\\\\src\\\\app\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Manartha Varsity Projects\\tunetalez\\src\\app\\layout.tsx","default")},53440:(a,b,c)=>{"use strict";c.d(b,{HA:()=>q,KC:()=>h,KJ:()=>g,QC:()=>p,VM:()=>k,Vz:()=>j,be:()=>m,cP:()=>i,iC:()=>n,v_:()=>l,zy:()=>o});var d=c(60326),e=c(67402),f=c(69477);let g=async(a,b)=>{try{let c=(0,f.KR)(d.IG,`pdfs/${a.name}`),g=(0,f.bp)(c,a);return new Promise((c,h)=>{g.on("state_changed",a=>{let c=a.bytesTransferred/a.totalBytes*100;console.log("Upload is "+c+"% done"),b&&b(c)},a=>{console.error("Upload failed:",a),h(a)},async()=>{let b=await (0,f.qk)(g.snapshot.ref),h={name:a.name,url:b,createdAt:Date.now()},i=await (0,e.gS)((0,e.rJ)(d.db,"pdfs"),h);c({...h,id:i.id})})})}catch(a){throw console.error("Error uploading PDF:",a),a}},h=async()=>{try{let a=(0,e.P)((0,e.rJ)(d.db,"pdfs"),(0,e.My)("createdAt","desc"));return(await (0,e.GG)(a)).docs.map(a=>({id:a.id,...a.data()}))}catch(a){throw console.error("Error getting PDFs:",a),a}},i=async a=>{try{if(!a.id)throw Error("Document ID is required");await (0,e.kd)((0,e.H9)(d.db,"pdfs",a.id));let b=(0,f.KR)(d.IG,`pdfs/${a.name}`);await (0,f.XR)(b)}catch(a){throw console.error("Error deleting PDF:",a),a}},j=async(a,b="reader")=>{try{let c={uid:a.uid,email:a.email||"",displayName:a.displayName||"",photoURL:a.photoURL||"",role:b,createdAt:Date.now()};return await (0,e.BN)((0,e.H9)(d.db,"users",a.uid),c,{merge:!0}),c}catch(a){throw console.error("Error creating user profile:",a),a}},k=async a=>{try{let b=await (0,e.x7)((0,e.H9)(d.db,"users",a));if(b.exists())return b.data();return null}catch(a){throw console.error("Error getting user profile:",a),a}},l=async(a,b)=>{try{await (0,e.BN)((0,e.H9)(d.db,"users",a),{role:b},{merge:!0})}catch(a){throw console.error("Error updating user role:",a),a}},m=async(a,b)=>{try{let c=`${Date.now()}_${a.name}`,e=(0,f.KR)(d.IG,`books/thumbnails/${c}`),g=(0,f.bp)(e,a);return new Promise((a,c)=>{g.on("state_changed",a=>{let c=a.bytesTransferred/a.totalBytes*100;console.log("Upload is "+c+"% done"),b&&b(c)},a=>{console.error("Upload failed:",a),c(a)},async()=>{let b=await (0,f.qk)(g.snapshot.ref);a(b)})})}catch(a){throw console.error("Error uploading thumbnail:",a),a}},n=async a=>{try{let b={...a,createdAt:Date.now()},c=await (0,e.gS)((0,e.rJ)(d.db,"books"),b);return{...b,id:c.id}}catch(a){throw console.error("Error creating book:",a),a}},o=async()=>{try{let a=(0,e.P)((0,e.rJ)(d.db,"books"),(0,e.My)("createdAt","desc"));return(await (0,e.GG)(a)).docs.map(a=>({id:a.id,...a.data()}))}catch(a){throw console.error("Error getting books:",a),a}},p=async a=>{try{let b=(0,e.H9)(d.db,"books",a),c=await (0,e.x7)(b);if(c.exists())return{id:c.id,...c.data()};return null}catch(a){throw console.error("Error getting book:",a),a}},q=async a=>{try{if(!a.id)throw Error("Document ID is required");if(await (0,e.kd)((0,e.H9)(d.db,"books",a.id)),a.thumbnailUrl)try{let b=a.thumbnailUrl.split("books/thumbnails/").pop();if(b){let a=(0,f.KR)(d.IG,`books/thumbnails/${b}`);await (0,f.XR)(a)}}catch(a){console.error("Error deleting thumbnail:",a)}}catch(a){throw console.error("Error deleting book:",a),a}}},57545:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},58062:(a,b,c)=>{"use strict";c.d(b,{Bh:()=>j,CI:()=>i,G6:()=>h,Hh:()=>f,Jv:()=>g});var d=c(68618),e=c(60326);let f=async(a,b)=>(0,d.eJ)(e.j2,a,b),g=async(a,b)=>(0,d.x9)(e.j2,a,b),h=async()=>{let a=new d.HF;return(0,d.df)(e.j2,a)},i=async()=>(0,d.CI)(e.j2),j=a=>(0,d.hg)(e.j2,a)},60326:(a,b,c)=>{"use strict";c.d(b,{IG:()=>j,db:()=>i,j2:()=>k});var d=c(34410),e=c(67402),f=c(69477),g=c(68618);let h=(0,d.Dk)().length?(0,d.Dk)()[0]:(0,d.Wp)({apiKey:"AIzaSyB7byiynZrjiqAo8NDIurtBg-MVBolYSjY",authDomain:"tune-tales-7bc34.firebaseapp.com",projectId:"tune-tales-7bc34",storageBucket:"tune-tales-7bc34.firebasestorage.app",messagingSenderId:"73380609988",appId:"1:73380609988:web:deb202818f8a602f73ee91",measurementId:"G-54939GDQH8"}),i=(0,e.aU)(h),j=(0,f.c7)(h),k=(0,g.xI)(h)},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},73285:(a,b,c)=>{Promise.resolve().then(c.bind(c,51472))}};