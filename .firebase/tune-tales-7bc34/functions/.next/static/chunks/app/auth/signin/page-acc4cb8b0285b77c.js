(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{63:(e,r,t)=>{"use strict";var a=t(7260);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},1990:(e,r,t)=>{"use strict";t.d(r,{HA:()=>g,KC:()=>i,KJ:()=>n,QC:()=>p,VM:()=>d,Vz:()=>c,be:()=>h,cP:()=>l,iC:()=>m,v_:()=>u,zy:()=>b});var a=t(5300),s=t(9708),o=t(9996);let n=async(e,r)=>{try{let t=(0,o.KR)(a.IG,"pdfs/".concat(e.name)),n=(0,o.bp)(t,e);return new Promise((t,i)=>{n.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Upload failed:",e),i(e)},async()=>{let r=await (0,o.qk)(n.snapshot.ref),i={name:e.name,url:r,createdAt:Date.now()},l=await (0,s.gS)((0,s.rJ)(a.db,"pdfs"),i);t({...i,id:l.id})})})}catch(e){throw console.error("Error uploading PDF:",e),e}},i=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"pdfs"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting PDFs:",e),e}},l=async e=>{try{if(!e.id)throw Error("Document ID is required");await (0,s.kd)((0,s.H9)(a.db,"pdfs",e.id));let r=(0,o.KR)(a.IG,"pdfs/".concat(e.name));await (0,o.XR)(r)}catch(e){throw console.error("Error deleting PDF:",e),e}},c=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reader";try{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",role:r,createdAt:Date.now()};return await (0,s.BN)((0,s.H9)(a.db,"users",e.uid),t,{merge:!0}),t}catch(e){throw console.error("Error creating user profile:",e),e}},d=async e=>{try{let r=await (0,s.x7)((0,s.H9)(a.db,"users",e));if(r.exists())return r.data();return null}catch(e){throw console.error("Error getting user profile:",e),e}},u=async(e,r)=>{try{await (0,s.BN)((0,s.H9)(a.db,"users",e),{role:r},{merge:!0})}catch(e){throw console.error("Error updating user role:",e),e}},h=async(e,r)=>{try{let t="".concat(Date.now(),"_").concat(e.name),s=(0,o.KR)(a.IG,"books/thumbnails/".concat(t)),n=(0,o.bp)(s,e);return new Promise((e,t)=>{n.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Upload failed:",e),t(e)},async()=>{let r=await (0,o.qk)(n.snapshot.ref);e(r)})})}catch(e){throw console.error("Error uploading thumbnail:",e),e}},m=async e=>{try{let r={...e,createdAt:Date.now()},t=await (0,s.gS)((0,s.rJ)(a.db,"books"),r);return{...r,id:t.id}}catch(e){throw console.error("Error creating book:",e),e}},b=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"books"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting books:",e),e}},p=async e=>{try{let r=(0,s.H9)(a.db,"books",e),t=await (0,s.x7)(r);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error getting book:",e),e}},g=async e=>{try{if(!e.id)throw Error("Document ID is required");if(await (0,s.kd)((0,s.H9)(a.db,"books",e.id)),e.thumbnailUrl)try{let r=e.thumbnailUrl.split("books/thumbnails/").pop();if(r){let e=(0,o.KR)(a.IG,"books/thumbnails/".concat(r));await (0,o.XR)(e)}}catch(e){console.error("Error deleting thumbnail:",e)}}catch(e){throw console.error("Error deleting book:",e),e}}},5300:(e,r,t)=>{"use strict";t.d(r,{IG:()=>c,db:()=>l,j2:()=>d});var a=t(2078),s=t(9708),o=t(9996),n=t(1328);let i=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyB7byiynZrjiqAo8NDIurtBg-MVBolYSjY",authDomain:"tune-tales-7bc34.firebaseapp.com",projectId:"tune-tales-7bc34",storageBucket:"tune-tales-7bc34.firebasestorage.app",messagingSenderId:"73380609988",appId:"1:73380609988:web:deb202818f8a602f73ee91",measurementId:"G-54939GDQH8"}),l=(0,s.aU)(i),c=(0,o.c7)(i),d=(0,n.xI)(i)},6301:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(5155),s=t(2115),o=t(63),n=t(2619),i=t.n(n),l=t(6768),c=t(1990);function d(){let[e,r]=(0,s.useState)(""),[t,n]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),[b,p]=(0,s.useState)(!1),g=(0,o.useRouter)(),y=async r=>{r.preventDefault(),m(""),p(!0);try{if(d){let r=await (0,l.Hh)(e,t);await (0,c.Vz)(r.user)}else await (0,l.Jv)(e,t);p(!1),g.push("/")}catch(e){m(e.message||"Authentication failed"),p(!1)}},x=async()=>{m(""),p(!0);try{let e=await (0,l.G6)();await (0,c.Vz)(e.user),p(!1),g.push("/")}catch(e){m(e.message||"Google authentication failed"),p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"bg-[#1F1F1F] p-8 rounded-lg shadow-lg max-w-md w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(i(),{href:"/",className:"inline-block",children:(0,a.jsxs)("span",{className:"text-3xl font-bold",children:[(0,a.jsx)("span",{className:"text-primary",children:"Tune"}),(0,a.jsx)("span",{className:"text-white",children:"Talez"})]})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mt-4",children:d?"Create an Account":"Sign In to Your Account"})]}),h&&(0,a.jsx)("div",{className:"bg-red-900 border border-red-700 text-white px-4 py-3 rounded relative mb-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:h})}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email Address"}),(0,a.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>r(e.target.value),required:!0,className:"w-full px-3 py-2 bg-[#2a2a2a] border border-[#3a3a3a] rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"your@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:t,onChange:e=>n(e.target.value),required:!0,className:"w-full px-3 py-2 bg-[#2a2a2a] border border-[#3a3a3a] rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary",placeholder:d?"Create a password":"Enter your password"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-primary hover:bg-primary-dark text-white py-2 px-4 rounded-md transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",children:b?"Processing...":d?"Sign Up":"Sign In"})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-[#3a3a3a]"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-[#1F1F1F] text-gray-400",children:"Or continue with"})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:x,disabled:b,className:"w-full flex items-center justify-center bg-white hover:bg-gray-100 text-gray-800 py-2 px-4 rounded-md transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[(0,a.jsx)("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.798-1.677-4.198-2.701-6.735-2.701-5.539 0-10.032 4.493-10.032 10.032s4.493 10.032 10.032 10.032c8.445 0 10.452-7.888 9.629-11.732h-9.629z",fill:"currentColor"})}),(0,a.jsxs)("span",{children:["Sign ",d?"up":"in"," with Google"]})]})})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)("button",{onClick:()=>u(!d),className:"text-primary hover:text-primary-light transition-colors",children:d?"Already have an account? Sign In":"Need an account? Sign Up"})})]})})}},6768:(e,r,t)=>{"use strict";t.d(r,{Bh:()=>c,CI:()=>l,G6:()=>i,Hh:()=>o,Jv:()=>n});var a=t(1328),s=t(5300);let o=async(e,r)=>(0,a.eJ)(s.j2,e,r),n=async(e,r)=>(0,a.x9)(s.j2,e,r),i=async()=>{let e=new a.HF;return(0,a.df)(s.j2,e)},l=async()=>(0,a.CI)(s.j2),c=e=>(0,a.hg)(s.j2,e)},6818:(e,r,t)=>{Promise.resolve().then(t.bind(t,6301))}},e=>{e.O(0,[135,210,372,619,441,493,358],()=>e(e.s=6818)),_N_E=e.O()}]);