(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{63:(e,r,t)=>{"use strict";var a=t(7260);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},1990:(e,r,t)=>{"use strict";t.d(r,{HA:()=>b,KC:()=>l,KJ:()=>n,QC:()=>p,VM:()=>d,Vz:()=>c,be:()=>h,cP:()=>i,iC:()=>m,v_:()=>u,zy:()=>g});var a=t(5300),s=t(9708),o=t(9996);let n=async(e,r)=>{try{let t=(0,o.KR)(a.IG,"pdfs/".concat(e.name)),n=(0,o.bp)(t,e);return new Promise((t,l)=>{n.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Upload failed:",e),l(e)},async()=>{let r=await (0,o.qk)(n.snapshot.ref),l={name:e.name,url:r,createdAt:Date.now()},i=await (0,s.gS)((0,s.rJ)(a.db,"pdfs"),l);t({...l,id:i.id})})})}catch(e){throw console.error("Error uploading PDF:",e),e}},l=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"pdfs"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting PDFs:",e),e}},i=async e=>{try{if(!e.id)throw Error("Document ID is required");await (0,s.kd)((0,s.H9)(a.db,"pdfs",e.id));let r=(0,o.KR)(a.IG,"pdfs/".concat(e.name));await (0,o.XR)(r)}catch(e){throw console.error("Error deleting PDF:",e),e}},c=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reader";try{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",role:r,createdAt:Date.now()};return await (0,s.BN)((0,s.H9)(a.db,"users",e.uid),t,{merge:!0}),t}catch(e){throw console.error("Error creating user profile:",e),e}},d=async e=>{try{let r=await (0,s.x7)((0,s.H9)(a.db,"users",e));if(r.exists())return r.data();return null}catch(e){throw console.error("Error getting user profile:",e),e}},u=async(e,r)=>{try{await (0,s.BN)((0,s.H9)(a.db,"users",e),{role:r},{merge:!0})}catch(e){throw console.error("Error updating user role:",e),e}},h=async(e,r)=>{try{let t="".concat(Date.now(),"_").concat(e.name),s=(0,o.KR)(a.IG,"books/thumbnails/".concat(t)),n=(0,o.bp)(s,e);return new Promise((e,t)=>{n.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r&&r(t)},e=>{console.error("Upload failed:",e),t(e)},async()=>{let r=await (0,o.qk)(n.snapshot.ref);e(r)})})}catch(e){throw console.error("Error uploading thumbnail:",e),e}},m=async e=>{try{let r={...e,createdAt:Date.now()},t=await (0,s.gS)((0,s.rJ)(a.db,"books"),r);return{...r,id:t.id}}catch(e){throw console.error("Error creating book:",e),e}},g=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"books"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting books:",e),e}},p=async e=>{try{let r=(0,s.H9)(a.db,"books",e),t=await (0,s.x7)(r);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error getting book:",e),e}},b=async e=>{try{if(!e.id)throw Error("Document ID is required");if(await (0,s.kd)((0,s.H9)(a.db,"books",e.id)),e.thumbnailUrl)try{let r=e.thumbnailUrl.split("books/thumbnails/").pop();if(r){let e=(0,o.KR)(a.IG,"books/thumbnails/".concat(r));await (0,o.XR)(e)}}catch(e){console.error("Error deleting thumbnail:",e)}}catch(e){throw console.error("Error deleting book:",e),e}}},3147:(e,r,t)=>{Promise.resolve().then(t.bind(t,8450))},5300:(e,r,t)=>{"use strict";t.d(r,{IG:()=>c,db:()=>i,j2:()=>d});var a=t(2078),s=t(9708),o=t(9996),n=t(1328);let l=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyB7byiynZrjiqAo8NDIurtBg-MVBolYSjY",authDomain:"tune-tales-7bc34.firebaseapp.com",projectId:"tune-tales-7bc34",storageBucket:"tune-tales-7bc34.firebasestorage.app",messagingSenderId:"73380609988",appId:"1:73380609988:web:deb202818f8a602f73ee91",measurementId:"G-54939GDQH8"}),i=(0,s.aU)(l),c=(0,o.c7)(l),d=(0,n.xI)(l)},8450:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(5155),s=t(2115),o=t(63),n=t(2619),l=t.n(n),i=t(5239),c=t(1990);function d(){let{id:e}=(0,o.useParams)(),[r,t]=(0,s.useState)(null),[n,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{if(e)try{d(!0);let r=await (0,c.QC)(e);if(!r)return void h("Book not found");t(r),h(null)}catch(e){console.error("Error fetching book:",e),h("Failed to load book. Please try again later.")}finally{d(!1)}})()},[e]),n)?(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange"})})})}):u||!r?(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-red-900 border border-red-700 text-white px-4 py-3 rounded relative",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:u||"Book not found"})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(l(),{href:"/",className:"text-orange hover:text-orange-light flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary via-orange to-primary-dark py-6 px-4 shadow-lg",children:(0,a.jsx)("div",{className:"container mx-auto flex justify-between items-center",children:(0,a.jsxs)(l(),{href:"/",className:"text-white hover:text-gray-200 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"TuneTalez"]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"relative h-64 md:h-80 w-full bg-[#1F1F1F] rounded-lg overflow-hidden mb-6",children:[(0,a.jsx)(i.default,{src:r.thumbnailUrl,alt:r.title,fill:!0,className:"object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black to-transparent flex items-end",children:(0,a.jsxs)("div",{className:"p-6 text-white w-full",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:r.title}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-lg text-gray-300",children:["By ",r.author]}),r.tags&&r.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.tags.map((e,r)=>(0,a.jsx)("span",{className:"text-xs bg-[#333333] text-gray-300 px-2 py-1 rounded-full",children:e},r))})]})]})})]}),(0,a.jsx)("div",{className:"bg-[#1F1F1F] rounded-lg shadow-md overflow-hidden p-6 md:p-8 lg:p-10",children:(0,a.jsx)("div",{className:"prose prose-lg max-w-none prose-invert prose-headings:text-orange prose-a:text-primary-light",dangerouslySetInnerHTML:{__html:r.content.includes("<")&&r.content.includes(">")?r.content:r.content.replace(/\n/g,"<br>")}})})]})]})}}},e=>{e.O(0,[135,210,372,619,239,441,493,358],()=>e(e.s=3147)),_N_E=e.O()}]);